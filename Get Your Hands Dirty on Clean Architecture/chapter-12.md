# 12 아키텍처 스타일 결정

지금까지 이 책은 헥사고날 아키텍처 스타일로 웹 애플리케이션을 만드는 지속적인 접근방법을 나타냈다. shortcuts을 가지는 코드 구성부터, 이런 아키텍처 스타일이 맞서는 많은 문제에 대한 해결책을 얘기했다.

이 책에서의 해결책은 전통적인 계층형 아키텍처 스타일에 적용될 수 있다. 어떤 해결책은 이책에서 제안된 것처럼 도메인 중심 접근법으로 구현될 수 있다. 그리고 어떤 해결책은 경험해보지 못했기 때문에 동의하지 않을 수 있다.

우리가 대답하기 원하는 마지막 질문은 이것들이다: 실제로 언제 헥사고날 아키텍처 스타일을 사용해야 하는가? 그리고 언제 전통적인 레이어 아키텍처 스타일을 고수해야 하는가?



## 도메인이 왕이다

헥사고날 아키텍처 스타일의 주요 특징이 영속성 관심사나 외부 시스템 의존성과 무관하게 도메인 코드를 개발할 수 있다는 사실을 이전 장에서 분명히 확인했다.

> 도메인 코드를 외부 영향없이 진화하는 것은 헥사고날 아키텍처 스타일에 가장 중요한 요소이다.



이것은 이 아키텍처 스타일이 도메인 주도 설계와 잘 맞는지 보여준다. 분명하게 말하면 DDD에서는 도메인이 개발을 주도한다. 그리고 영속성에 대한 관심과 다른 기술적 요소에 대해 생각할 필요가 없다면 도메인에 대해 가장 좋은 이유를 찾을 수 있다.

헥사고날 아키텍처와 같은 도메인 중심 아키텍처 스타일이 DDD를 실행하게 하는 것이라고 지금까지 말해왔다는 것이다. 도메인을 줌시에 두는 아키텍처 없이, 도메인 코드로의 의존성 역전 없이, DDD를 할 수 있는 가능성은 없다. 설계는 항상 다른 요인에 의해 유도될 것이다.

그래서 이 책에서 나타낸 아키텍처 스타일을 사용할지에 대한 첫번째 표시로써, 도메인 코드가 애플리케이션에서 가장 중요한 것이 아니라면 아키텍처 스타일이 아마 필요 없을 것이다.



## 경험이 여왕이다

우리는 습관적인 존재이다. 습관은 시간을 보낼 필요가 없게끔 자동적으로 결정해준다. 사자가 있다면 우리를 향해 달려오고 있다면 우리는 도망칠 것이다. 새로운 웹 애플리케이션을 만들고 있다면 레이어드 아키텍처 스타일을 상요한다. 과거에 그렇게 했고 그렇게 습관이 되었다.

이것이 반드시 나쁜 결정이다고 말하는 것은 아니다. 습관은 나쁜 습관이라도 좋은 결정을 내리도록 도와주도록 되어있다. 우리가 경험했던 것을 말하는 것이다. 과거에 했던 것에 편하게 느끼고 왜 변화해야만 하는가?

그래서, 아키텍처 스타일에 대해 교육받은 결정을 하는 유일한 방법은 다른 아키텍처 스타일에 대한 경험을 쌓는것이다. 만일 헥사고날 아키텍처를 확실하지 못한다면 현재 만들고 있는 애플리케이션에 작은 모듈로 한번 시도해봐라. 개념에 익숙해지고 편해져라. 이 책의 사상을 적용하고 수정하고 편하다고 생각되는 스타일을 개발하도록 당신의 생각을 넣어라.

이 경험은 다음 아키텍처 결정을 가이드해줄 수 있다.



## 상황에 따라 다르다

소셜 미디어에서 시끄럽게 하는 "당신은 어떤 성격의 사람이예요?"와 "당신은 어떤 종류의 개를 키우나요?"와 같이 아키텍처 스타일 결정할 때 다중선택 질문을 하고 싶다. 의존적인 사람이고 만일 개였다면 분명 무자비한 사람이었을 것이다.

하지만 그처럼 쉽지는 않다. 어느 아키텍처 스타일을 선택할 것인지에 대한 나의 대답은 "상황에 따라 다르다"이다. 소프트웨어 유형에 따라 다르다. 도메인 코드의 역할에 따라 다르다. 팀의 경험에 따라 다르다. 결정되는 상황에 따라 다르다.

하지만 이 책에서 아키텍처 질문에 도움이 될만한 것을 조금 제공했기를 바란다. 헥사고날에 관한것이던 아니던 간에 아키텍처 결정에 대해 할 이야기가 있다면 그 이야기를 듣고 싶다.

tom@reflectoring.io로 이메일을 보내도 된다.