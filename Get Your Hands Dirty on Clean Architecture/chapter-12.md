# 12. 아키텍처 스타일 결정

지금까지, 이 책은 헥사고날 아키텍처 스타일로 웹 애플리케이션을 만드는 지속적인 접근방법을 보여줬다. 임시방편을 가지는 코드 구성부터, 이런 아키텍처 스타일이 맞서는 많은 문제에 대한 해결책에 대해 설명했다.

이 책에서의 말한 내용은 전통적인 계층형 아키텍처 스타일에 적용될 수도 있다. 어떤 것은 이 책에서 말했던 도메인 중심 접근법으로 구현될 수도 있다. 그리고 어떤 것은 당신이 경험해보지 못한 것이라 그 내용에 동의하지 않을 수도 있다.

그러나, 우리가 대답하기 원하는 마지막 질문은 이것들이다: 실제로 언제 헥사고날 아키텍처 스타일을 사용해야 하는가? 그리고 언제 전통적인 계층형 아키텍처 스타일을 대신해서 계속 사용해야 하는가?



## 도메인이 왕이다

헥사고날 아키텍처 스타일의 주요 특징이 영속성 관심사나 외부 시스템에 의존성과는 무관하게 도메인 코드를 개발할 수 있다고 이전 내용에서 충분히 설명이 된 것 같다.

> 도메인 코드가 외부의 영향없이 진화하는 것은 헥사고날 아키텍처 스타일에서 가장 중요한 요소이다.



이 설명은 헥사고날 아키텍처 스타일이 왜 도메인 주도 설계와 잘 맞는지 나타낸다. 명확히 얘기하자면 DDD에서는 도메인이 개발을 주도한다. 그리고 영속성의 관심사와 다른 기술적 요소에 대해 생각할 필요가 없다면, 도메인에 대해서 가장 좋은 이유를 찾을 수 있다.

*헥사고날 아키텍처와 같은 도메인 중심 아키텍처 스타일이 DDD를 성공적으로 이끈다고*  말하는 것이다. 도메인을 사고의 중심에 두는 아키텍처도 없고, 도메인 코드로의 의존성 역전도 없다면 DDD를 실제 할 수 있는 가능성은 없다; 설계는 항상 다른 요인들에 의해서 변경될 것이다.

그래서, 이 책에서 말한 아키텍처 스타일을 사용할지에 대한 첫번째 지표로써, 만일 도메인 코드가 애플리케이션에서 가장 중요한 것이 아니라면 아키텍처 스타일은 아마 필요 없을 것이다.



## 경험이 여왕이다

우리는 습관적인 존재이다. 습관은 결정하는 데 시간을 낭비할 필요가 없게 자동적으로 결정해준다. 우리를 향해 달려오는 사자가 있다면 우리는 도망칠 것이다. 새로운 웹 애플리케이션을 만들고 있다면 우리는 계층형 아키텍처 스타일을 사용한다. 과거에 그렇게 했고 그렇게 습관이 되었다.

이것이 무조건 나쁜 결정이라고 말하는 것은 아니다. 습관은 나쁜 습관이라도 좋은 결정을 내리게 할 수 있다. 우리는 경험한 대로 한다라고 말하는 것이다. 과거에 했던 방식이 편한데 왜 바꿔야만 하나?

그래서, 아키텍처 스타일에 대한 현명한 결정을 하는 유일한 방법은 다른 아키텍처 스타일에 대한 경험을 쌓는 것이다. 만일 헥사고날 아키텍처에 확신하지 못한다면 현재 만들고 있는 애플리케이션에 작은 모듈에 시험삼아 한번 해봐라. 개념에 익숙해지고 편안해져야 한다.. 이 책의 생각들을 적용해보고 수정도  해보고 편하다고 생각되는 스타일을 개발할 수 있도록 당신의 생각도 덧붙여라.

이런 경험은 다음에 아키텍처를 결정할 때 좋은 지침이 될 수 있다.



## 상황에 따라 다르다

소셜 미디어에서 시끄럽게 하는 "당신은 어떤 성격의 사람이예요?"와 "당신은 어떤 종류의 개인가요?"와 같이 아키텍처 스타일 결정할 때 다중 선택 질문을 좋아한다. 방어적 성격이고 만일 개였다면 나는 분명 핏불테리어(작고 강인한 투견용 개)였을 것이다.

하지만 그처럼 쉽지만은 않다. 어떤 아키텍처 스타일을 선택할 것인지에 대한 나의 대답은 "상황에 따라 다르다"이다. 소프트웨어 유형에 따라서도 다르다. 도메인 코드의 역할에 따라서도 다르다. 팀의 경험에 따라서도 다르다. 결국은, 결정사항에 얼마나 만족하는가이다.

하지만 아키텍처의 질문사항에 도움이 될만한 내용들을 이 책에서 제공했기를 기대한다. 헥사고날에 관한 것이던 아니던 간에 아키텍처 결정에 대해 할 이야기가 있다면 언제던지 해도 된다.

tom@reflectoring.io으로 이메일을 보내면 된다.