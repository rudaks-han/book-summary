# 02 의사소통과 언어 사용

도메인 모델

- 소프트웨어 프로젝트를 위한 공통 언어의 핵심
- 모델은 프로젝트에 참여한 사람들의 머리속에 축적된 개념은 모아둔 것이고 도메인에 대한 통찰력을 반영하는 용어와 관계로 표현된다.
- 이러한 용어와 관계는 기술개발을 할 수 있을 만큼 충분히 정확하고 언어의 의미체계를 제공한다.
- 모델을 개발활동과 결부시키고 코드와 연계하는 데 매우 중요한 연결고리 역할을 한다.



> 프로젝트에서 언어를 사용하는 것은 미묘하지만 아주 중요하다.



## UBIQUITOUS LANGUAGE (보편 언어)



**도메인 전문가와 개발자의 사용언어 차이**

* 도메인 전문가는 기술용어를 이해하는 데 한계가 있지만 자신의 전문 용어는 다양하게 사용한다.
* 개발자는 시스템 용어를 서술하고 이해해도 전문자들의 언어의 의미는 알지 못한다.
* 개발자는 설계는 뒷받침하지만 도메인 전문가가 이해할 수 없는 방식으로 추상화할지도 모른다.
* 문제의 다양한 영역을 다루는 개발자는 자기만의 설계 개념과 도메인을 서술하는 방식을 고안해내기 마련이다.

* 도메인 전문가는 원하는 바를 모호하게 서술한다.
* 도메인을 이해하려고 노력하는 개발자가 이해하는 바도 모호한 수준에 머문다.
* 팀의 일부만이 가까스로 도메인 전문가와 개발자가 사용하는 언어를 모두 소화해 내지만, 금방 병목지점이 되고 번영하는 바도 정확하지 않다.



**공통언어의 부재**

* 공통언어가 없는 프로젝트는 개발자 = 도메인 전문가 간의 번역이 필요하다.
* 모델의 개념을 혼란스럽게 하는 번역은 해로운 코드 리팩터링으로 이어진다.
* 의사소통이 직접적으로 일어나지 않아 겉으로 드러나지 않는다.
* 용어를 다르게 써도 알아채지 못한다.
* 번역에 따르는 노력으로 지식과 아이디어 상호작용이 저해된다.



예제: 화물의 운송 항로 고안하기

<대화내용>



### 크게 소리내어 모델링하기

인간은 구어에 천부적인 재능이 있다. 하지만 대개 도메인 모델의 언어를 사용하지 않는다. 대부분 각자 생각하는 방식의 언어로 표현한다.



모델을 정제하는 가장 좋은 방식은 모델 요소를 말하기를 통해 살펴보는 것이다.

>"Routing Service에 출발지, 목적지, 도착 시각을 전달하면 화물이 멈춰야 할 지점을 찾고, 음... 그것을 데이터베이스에 삽입한다" `(모호하고 기술적인)`
>
>"출발지, 목적지, 등등... 이것들을 모두 Routing Service에 넣으면 필요한 것이 모두 담긴 Itenerary를 돌려받는다." `(좀더 완전해졌지만, 장황함)`
>
>"Routing Service는 Routing Specification을 만족하는 Itinerary를 찾는다." `(간결함)`



도메인 모델에 사용된 UBIQUITOUS LANGUAGE를 논의할 때 사용하면 우리는 해당 언어를 더욱 유창하게 구사하고 서로에게 해당 언어의 미묘한 차이까지 가르칠 수 있다.

UBIQUITOUS LANGUAGE 패턴의 추가사항은 다음과 같다.

> 시스템에 관해 이야기를 주고받을 때 모델을 사용하라. 모델의 요소와 상호작용을 이용하고 모델이 허용하는 범위에 **개념**을 조합하면서 시나리오를 큰 소리로 말해보라. 표현해야 할 것을 더 **쉽게 말하는 방법**을 찾아낸 다음 그러한 새로운 아이디어를 **다이어그램과 코드**에 적용하라.



### 한 팀, 한 언어

종종 기술 담당자는 업무 전문가에게 도메인 모델을 보여줄 필요가 없다고 생각한다. 그들은 이렇게 말한다.

> "업무 전문가들에게는 너무 추상적이라서요"
>
> "업무 전문가들은 객체를 이해하지 못해요"
>
> "업무 전문가들이 쓰는 용어로 된 요구사항을 만들어야 해요"



모델은 핵심은 도메인 전문가의 관심을 끌어야 한다.

* 설계에는 도메인 전문가와 관련이 없는 기술적인 구성요소도 있지만 모델의 핵심은 도메인 전문가의 관심을 끌어야 한다. 
* 너무 추상적이다? 그럼 추상화가 제대로 됐는지는 어떻게 알 수 있는가? 
* 도메인 전문가만큼 도메인을 깊이 있게 이해하는가? 
* 간혹 특정한 요구사항은 사용자에게서 수집하고 도메인 전문가에게 더 구체적인 용어가 필요할지도 모르지만 도메인 전문가는 해당 분야에 심층적으로 사고할 능력을 갖추었다고 봐야 한다. 



### 문서와 다이어그램

소프트웨어 설계를 논의하는 회의를 할 때마다 화이트보드나 스케치북에 그림을 그리지 않으면 제대로 되는 경우가 거의 없다.

하지만 문제는 사람들이 UML을 통해 전체 모델이나 설계를 전달해야 한다고 느낄때 생긴다. 이런 세부사항이 모두 포함되면 어느 누구도 나무만 보고 숲은 보지 못한다.

설계의 생생한 세부사항은 코드에 담긴다. 보조적인 역할을 수행하는 다이어그램과 문서를 이용해 핵심에 주의를 기울일 수 있다. 

모델은 다이어그램이 아니라는 점을 항상 명심해야 한다. 다이어그램의 목적은 모델을 전달하고 설명하는 데 있다.



#### 글로 쓴 설계 문서

1. 문서는 코드와 말을 보완하는 역할을 해야 한다.
    * 애자일에서는 별도 문서를 유지하지 말고 코드로써 소통하자는 입장
    * 하지만 설계 문서로써 코드에는 한계가 있다.
    * 코드를 읽는 이는 세부사항에 압도될 수 있다. 또한 개발자만 모델을 이해해야 하는 것은 아니다.
2. 문서는 유효한 상태를 유지하고 최신 내용을 담고 있어야 한다.
    * 설계 문서의 가장 큰 가치는 모델의 개념을 설명하고, 코드의 세부사항을 파악해 나가는 데 도움을 준다.
3. 문서는 프로젝트 활동과 관련을 맺고 있어야 한다.
    * 문서가 UBIQUITOUS LANGUAGE와 상호작용하는가?
    * 설계 문서의 용어가 사용되지 않는다면 문서자체가 잘못 된 것이다. 너무 방대하거나 복잡할 수도 있다. 
    * 문서를 읽지 않거나 읽을 필요가 없다고 여긴다.
    * 점차 문서의 중요성은 낮아지고 문서를 최신 상태로 유지하는 것은 노력의 낭비일 뿐이다.



> 문서를 최소한으로 유지하고 코드와 대화를 보완하는데 집중해라.



### 설명을 위한 모델

설계를 주도하는 모델은 도메인을 바라보는 하나의 관점에 해당하지만 도메인의 일반 지식을 전달하기 위해 다른 관점으로 도움을 줄 수 있다. 이러한 목적으로 사람들은 소프트웨어 설계와는 무관한, 모델을 전달하는 그림이나 단어를 활용할 수 있다.

설명을 위한 모델은 훨씬 더 전달력이 높은 의사소통 방식을 만들 수 있다. 도메인 전문가가 사용하는 시각적인 은유는 개발자를 교육하고 전문가 간의 조화로운 합의를 이끌어 내는데 분명한 설명을 제시하곤 한다.

설명을 위한 모델이 객체 모델일 필요는 없으며, 오히려 그렇지 않을 때가 일반적으로 가장 좋다. UML 사용을 자제하고 설계를 주도하는 모델과는 다르다는 것을 인식해야 한다.

ㅋ