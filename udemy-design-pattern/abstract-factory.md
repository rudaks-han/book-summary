> 이 내용은 udemy의 design pattern 강의를 정리한 것입니다.
>
> https://www.udemy.com/course/design-patterns-in-java-concepts-hands-on-projects/



# 추상 팩토리 패턴

## 추상 팩토리는 무엇인가?

* 추상 팩토리는 객체를 구성하는 2개 이상의 객체를 가지고 있고 클라이언트 코드에서 생성될 수 있는 여러 개의 타입이 생성될 경우에 사용된다.

* 그래서, 구성요소를 생성하는 코드를 클라이언트 코드로부터 분리한다.

    


## UML



## 추상 팩토리 구현방법

* 클래스의 구성 요소를 정의함으로서 시작한다.
* * 추상 팩토리를 추상 클래스나나 인터페이스로 생성
    * 추상 팩토리는 객체를 만들기 위해 추상 메소드를 정의한다.
    * 유형 별 개별 구성요소의 팩토리 구현체를 제공 
* 추상 팩토리는 팩토리 메소드 패턴을 사용한다. 추상 팩토리를 여러 개의 팩토리 메소드를 가진 객체로 생각할 수 있다.






## 추상 팩토리 구현



## 구현 시 고려사항

* 팩토리는 싱글톤처럼 구현될 수 있고 일반적으로 하나의 인스턴스만 필요하다.
* 새로운 구성요소 유형을 추가하는 것은 팩토리 구현에서 처럼 기반 팩토리의 변경을 필요로 한다.
* 클라이언트 코드에 객체를 생성할 수 있는 구체적인 팩토리를 제공한다.



## 디자인 고려사항

* 객체 생성을 제한하여 동일하게 동작하도록 하고 있다면 추상 팩토리는 좋은 선택지가 된다.
* 추상 팩토리는 팩토리 메소드 패턴을 사용한다.
* 객체 생성이 비용이 많이 드는 작업이라면 객체 생성하는 작업에 팩토리 구현보다 프로토타입 패턴으로 바꿀 수도 있다.



## 추상 팩토리 예제

* javax.xml.DocumentbuilderFactory가 추상팩토리 패턴의 좋은 예이다.
* 하지만 이 구현은 GoF 추상 팩토리와 100% 일치하지 않는다. 이 클래스는 실제 팩토리 클래스 객체를 리턴하는 정적 newInstance() 메서드를 가지고 있다.
* newInstance() 메소드는 팩토리 클래스를 찾고, 팩토리 객체를 생성하기 위한 방법으로 클래스패스 스캐닝, system properties, external property 파일을 사용한다. 그래서 정적 메소드일지라도 팩토리 클래스를 변경할 수 있다.



## 잠재적인 위험

* 팩토리 메소드 보다 구현하기 더 복잡하다.
* 새로운 구성요소를 추가하는 것은 팩토리의 모든 구현부와 기반 팩토리의 변경을 가져온다.
* 개발을 시작할 때 시각화하기 어렵고 보통은 팩토리 메소드로서 시작한다.
* 추상 팩토리 패턴은 제품 군에 관련된 문제를 해결하는데 좋다.

