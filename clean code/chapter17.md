# 17 냄새와 휴리스틱

##### 주석

###### C1: 부적절한 정보

다른 시스템에 (예를 들어, 소스 코드 관리 시스템, 버그 추적 시스템, 이슈 처적 시스템, 기타 기록 관리 시스템에) 저장할 정보는 주석으로 적절하지 못하다.
일반적으로 작성자, 최종 수정일, SPR(Software Problem Report) 번호 등과 같은 메타 정보만 주석으로 넣는다.
주석은 코드와 설계에 기술적인 설명을 부연하는 수단이다.



###### C2: 쓸모 없는 주석

* 오래된 주석, 엉뚱한 주석, 잘못된 주석은 더 이상 쓸모가 없다.
* 주석은 빨리 낡는다. 
* 쓸모 없어질 주석은 아예 달지 않는 편이 가장 좋다. 
* 쓸모 없어진 주석은 재빨리 삭제하는 편이 가장 좋다.
* 쓸모 없는 주석은 일단 들어가고 나면 코드에서 쉽게 멀어진다.



###### C3: 중복된 주석

코드만으로 충분한데 구구절절 설명하는 주석이 중복된 주석이다.

```java
i++; // i 증가
```

```java
/**
  * @param sellRequest
  * @return
  * @throws ManagedComponentException
  */
public SellResponse beginSellItem(SellRequest sellRequest) throws ManagedComponentException
```



###### C4: 성의 없는 주석

주석을 달 참이라면 시간을 들여 최대한 멋지게 작성한다.



###### C5: 주석 처리된 코드

코드를 읽다가 주석으로 처리된 코드가 줄줄이 나오면 신경이 아주 거슬린다. 얼마나 오래된 코드인지, 중요한 코드인지 아닌지, 알 길이 없다. 그럼에도 마우도 삭제하지 않는다. 누군가에게 필요하거나 다른 사람이 사용할 코드라 생각하기 때문이다.

주석으로 처리된 코드를 발견하면 즉각 지워버려라!



##### 환경

###### E1: 여러 단계로 빌드해야 한다

빌드는 간단히 한 단계로 끝나야 한다. 한 명령으로 전체를 체크아웃해서 한 명령으로 빌드할 수 있어야 한다.

```
svn get mySystem
cd mySystem
ant all
```



##### E2: 여러 단계로 테스트해야 한다

IDE에서 버튼 하나로 모든 테스트를 돌린다면 가장 이상적이다.



##### 함수

###### F1: 너무 많은 인수

함수에서 인수 개수는 작을수록 좋다. 넷 이상은 그 가치가 아주 의심스러우므로 최대한 피한다.



###### F2: 출력 인수



###### F3: 플래그 인수

플래그 인수는 혼란을 초래하므로 피해야 마땅하다.



###### F4: 죽은 함수

아무도 호출하지 않는 함수는 삭제한다. 죽은 코드는 낭비다. 과감히 삭제하라.



##### 일반

###### G1: 한 소스 파일에 여러 언어를 사용한다

소스 파일 하나에 언어 하나만 사용하는 방식이 가장 좋다.



###### G2: 단연한 동작을 구현하지 않는다

최소 놀람의 원칙(The Principle of Least Surprise)에 의거해 함수나 클래스는 다른 프로그래머가 당연하게 여길 만한 동작과 기능을 제공해야 한다.

```java
Day day = DayDate.StringToDay(String dayName);
```

함수가 'Monday'를 Day.MONDAY로 변환하리라 기대한다. 일반적인 요일 약어도 변환하리라 기대한다. 대소문자는 당연히 구분하지 않으리라 기대한다.



###### G3: 경계를 올바로 처리하지 않는다

스스로의 직관에 의존하지 마라. 모든 경계 조건을 찾아내고, 모든 경계 조건을 테스트하는 테스트 케이스를 작성하라.



###### G4: 안전 절차 무시

알전 절차를 무시하면 위험하다.  컴파일러 경고 일부를 꺼버리면 빌드가 쉬워질지 모르지만 자칫하면 끝없는 디버깅에 시달린다.



###### G5: 중복

코드에서 중복을 발견할 때마다 추상화할 기회로 간주하라. 중복된 코드를 하위 루틴이나 다른 클래스로 분리하라.

* 똑같은 코드가 나오는 경우
    * 간단한 함수로 교체한다.
* switch/case나 if/else 문으로 확인하는 중복
    * 다형성으로 대체
* 알고리즘은 유사하나 코드가 서로 다른 중복
    * template method 패턴이나 strategy 패턴으로 제거



###### G6: 추상화 수준이 올바르지 못하다





