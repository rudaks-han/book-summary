## 4. 역할, 책임, 협력

- 객체의 모양은 객체가 참여하는 협력에 의해. 
- 어떤 협력에 참여했는지에 따라 필요한 행동을 결정하고, 필요한 행동이 객체의 상태를 결정한다.
- **협력**은 요청에서 시작된다. 해당 객체는 요청에 대해 응답하는데 필요한 지식과 행동 방식을 가지고 있다.
- 요청과 응답은 협력에 참여하는 객체가 수행할 **책임**을 정의한다.
- 객체의 **책임**은  '아는 것(knowing)' 과 '하는 것(doing)' 으로 구성된다.
  - 하는 것: 객체 생성하거나 계산하는 등 스스로 하는 것, 다른 객체의 행동을 시작시키는 것, 다른 객체의 활동을 제어/조절하는 것.
  - 아는 것: 개인적인 정보에 관해 아는 것, 관련 객체에 대해 아는 것, 자신이 유도하거나 계산할 수 있는 것에 관해 아는 것.
- 책임은 객체의 외부에 제공해 줄 수 있는 정보(아는 것)와 외부에 제공해 줄 수 있는 서비스(하는 것)의 목록 → 공용 인터페이스(public interface)
- 메세지 전송: 객체가 다른 객체에게 주어진 책임을 수행하도록 요청을 보내는 것
- **역할**의 개념을 사용하여 협력을 추상화함으로써 단순화할 수 있다. 다양한 객체들이 협력에 참여할 수 있기 때문에 협력이 유연해지며  재사용성이 높아진다. → 단순성(simplicity), 유연성(flexibility), 재사용성(reusability)
- 역할의 대체 가능성은 행위 호환성을 의미하고, 행위 호환성은 동일한 책임의 수행을 의미한다.

> 많은 사람들은 시스템에 필요한 데이터를 저장하기 위해 객체가 존재한다는 선입견을 가지고 있다. 물론 객체가 상태의 일부로 데이터를 포함하는 것은 사실이지만 데이터는 단지 객체가 행위를 수행하는 데 필요한 재료일 뿐이다. 객체가 존재하는 이유는 행위를 수행하며 협력에 참여하기 위해서다. 따라서 실제로 중요한 것은 객체의 행동, 즉 책임이다. - p.128

- 어플리케이션의 객체를 설계할 때 객체를 **협력이라는 문맥**에서 떼어 놓은 채 데이터나 클래스를 중심으로 바라보지 않도록 해야 한다.
- 객체지향은 협력이라는 견고한 문맥을 갖추고 협력에 필요한 책임을 결정한다
- 역할, 책임, 협력 관점에서의 어플리케이션 설계 기법
  - RDD, Responsibility-Driven Design: 협력에 필요한 책임을 식별하고 적합한 객체에게 책임을 할당하는 방식으로 설계
    - 절차:
      - 시스템이 사용자에게 제공해야 하는 기능인 시스템 책임을 파악한다
      - 시스템 책임을 더 작은 책임으로 분할한다
      - 분할된 책임을 수행할 수 있는 적절한 객체 또는 역할을 찾아 책임을 할당한다
      - 객체가 책임을 수행하는 중에 다른 객체의 도움이 필요한 경우 이를 책임질 적절한 객체 또는 역할을 찾은다
      - 해당 객체 또는 역할에게 책임을 할당함으로써 두 객체가 협력하게 한다
  - Design Pattern: 패턴은 전문가들이 특정 문제를 해결하기위해 이미 식별해 놓은 역할, 책임, 협력의 모음
    - 모범이 되는 설계. 특정 상황에서 설계를 돕기 위해 모방하고 수정할 수 있는 과거 설계 경험.
  - TDD, Test-Driven Development: 테스트가 아닌 설계를 위한 기법. 구체적인 코드를 작성해나가면서 역할, 책임, 협력을 식별하고 적합한지 피드백 받는다